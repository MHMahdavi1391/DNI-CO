<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¬Ø²Ø¦ÛŒØ§Øª Ù…Ø­ØµÙˆÙ„ - DNI CO</title>
  
  <!-- ÙÙˆÙ†Øª -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css">
  
  <!-- Ø§Ø³ØªØ§ÛŒÙ„ Ø§ØµÙ„ÛŒ -->
  <link rel="stylesheet" href="style.css">
  
  <style>
    /* Ø§Ø³ØªØ§ÛŒÙ„ Ø®Ø§Øµ ØµÙØ­Ù‡ Ù…Ø­ØµÙˆÙ„ */
    .product-detail-page {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .back-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 25px;
      background: white;
      color: #007aff;
      text-decoration: none;
      border-radius: 12px;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
      margin-bottom: 30px;
      transition: all 0.3s ease;
    }
    
    .back-button:hover {
      transform: translateX(5px);
      background: #007aff;
      color: white;
    }
    
    .product-container {
      background: white;
      border-radius: 25px;
      overflow: hidden;
      box-shadow: 0 20px 50px rgba(0,0,0,0.12);
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .product-header {
      background: linear-gradient(135deg, #007aff 0%, #00c6ff 100%);
      color: white;
      padding: 30px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .product-title {
      font-size: 32px;
      font-weight: 800;
      margin: 0;
    }
    
    .product-price-tag {
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
      padding: 12px 25px;
      border-radius: 15px;
      font-size: 24px;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .product-price-tag.free {
      background: rgba(255,149,0,0.2);
    }
    
    .product-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      padding: 40px;
    }
    
    .product-image-section {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .main-image {
      width: 100%;
      height: 350px;
      background: linear-gradient(135deg, #f5f5f7, #e8e8ed);
      border-radius: 20px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 30px;
    }
    
    .main-image img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      transition: transform 0.3s ease;
    }
    
    .main-image:hover img {
      transform: scale(1.05);
    }
    
    .image-badge {
      position: absolute;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #ff9500, #ff5e3a);
      color: white;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: 600;
      font-size: 14px;
    }
    
    .product-info-section {
      display: flex;
      flex-direction: column;
      gap: 25px;
    }
    
    .product-description {
      background: #f8f9fa;
      padding: 25px;
      border-radius: 20px;
      border-right: 5px solid #007aff;
    }
    
    .product-description h3 {
      color: #1d1d1f;
      margin-bottom: 15px;
      font-size: 22px;
    }
    
    .product-description p {
      color: #555;
      line-height: 1.8;
      font-size: 16px;
    }
    
    .product-features {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin: 20px 0;
    }
    
    .feature-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 15px;
      background: #f8f9fa;
      border-radius: 12px;
      color: #555;
    }
    
    .feature-item svg {
      color: #007aff;
      width: 20px;
      height: 20px;
    }
    
    /* Ø¨Ø®Ø´ Ø³ÙØ§Ø±Ø´ */
    .order-section {
      background: #f8f9fa;
      border-radius: 20px;
      padding: 30px;
      margin-top: 20px;
    }
    
    .order-section h3 {
      color: #1d1d1f;
      margin-bottom: 25px;
      font-size: 24px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .order-form {
      display: grid;
      gap: 20px;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .form-group label {
      color: #555;
      font-weight: 600;
      font-size: 15px;
    }
    
    .form-control {
      padding: 15px 20px;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      font-family: inherit;
      font-size: 16px;
      transition: all 0.3s ease;
      background: white;
    }
    
    .form-control:focus {
      border-color: #007aff;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,122,255,0.1);
    }
    
    .submit-btn {
      background: linear-gradient(135deg, #34c759, #2aa44f);
      color: white;
      border: none;
      padding: 18px;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-top: 20px;
      box-shadow: 0 6px 20px rgba(52,199,89,0.2);
    }
    
    .submit-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(52,199,89,0.3);
    }
    
    .submit-btn:active {
      transform: translateY(-1px);
    }
    
    .contact-options {
      display: flex;
      gap: 15px;
      margin-top: 25px;
      flex-wrap: wrap;
    }
    
    .contact-btn {
      flex: 1;
      min-width: 150px;
      padding: 15px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 600;
      text-align: center;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .contact-btn.call {
      background: linear-gradient(135deg, #007aff, #0056cc);
      color: white;
      box-shadow: 0 4px 15px rgba(0,122,255,0.2);
    }
    
    .contact-btn:hover {
      transform: translateY(-3px);
    }
    
    /* Ù…ÙˆØ¨Ø§ÛŒÙ„ */
    @media (max-width: 768px) {
      .product-header {
        flex-direction: column;
        gap: 20px;
        text-align: center;
        padding: 25px 20px;
      }
      
      .product-content {
        grid-template-columns: 1fr;
        padding: 25px;
        gap: 30px;
      }
      
      .main-image {
        height: 250px;
      }
      
      .product-features {
        grid-template-columns: 1fr;
      }
      
      .order-section {
        padding: 25px 20px;
      }
      
      .contact-options {
        flex-direction: column;
      }
      
      .contact-btn {
        width: 100%;
      }
    }
    
    /* Ù…ÙˆØ¨Ø§ÛŒÙ„ Ú©ÙˆÚ†Ú© */
    @media (max-width: 480px) {
      .product-title {
        font-size: 26px;
      }
      
      .product-price-tag {
        font-size: 20px;
      }
      
      .main-image {
        height: 200px;
        padding: 20px;
      }
      
      .product-description {
        padding: 20px;
      }
    }
  </style>
</head>
<body class="product-detail-page">

<div class="container">
  <!-- Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª -->
  <a href="index.html" class="back-button">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
    Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª
  </a>
  
  <!-- Ù…Ø­ØµÙˆÙ„ -->
  <div id="product-detail" class="product-container">
    <!-- Ù…Ø­ØªÙˆØ§ Ø¨Ø§ JS Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
  </div>
</div>

<!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øª -->
<script>
document.addEventListener('DOMContentLoaded', async function() {
  const productId = new URLSearchParams(window.location.search).get('id');
  const productDetail = document.getElementById('product-detail');
  
  if (!productId) {
    productDetail.innerHTML = `
      <div style="text-align: center; padding: 60px; color: #ff3b30;">
        <h3>Ù…Ø­ØµÙˆÙ„ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯!</h3>
        <p>Ù„Ø·ÙØ§Ù‹ Ø§Ø² Ø·Ø±ÛŒÙ‚ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø±Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯.</p>
        <a href="index.html" class="btn-details" style="margin-top: 20px; display: inline-block;">
          Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
        </a>
      </div>
    `;
    return;
  }
  
  try {
    // Ù„ÙˆØ¯ÛŒÙ†Ú¯
    productDetail.innerHTML = `
      <div style="display: flex; justify-content: center; align-items: center; min-height: 400px;">
        <div style="width: 50px; height: 50px; border: 4px solid #f3f3f3; border-top: 4px solid #007aff; border-radius: 50%; animation: spin 1s linear infinite;"></div>
      </div>
    `;
    
    const response = await fetch('products.json');
    const products = await response.json();
    const product = products.find(p => p.id == productId);
    
    if (!product) throw new Error('Ù…Ø­ØµÙˆÙ„ ÛŒØ§ÙØª Ù†Ø´Ø¯');
    
    // Ù†Ù…Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„
    renderProduct(product);
    
  } catch (error) {
    console.error('Ø®Ø·Ø§:', error);
    productDetail.innerHTML = `
      <div style="text-align: center; padding: 60px; color: #ff3b30;">
        <h3>Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø­ØµÙˆÙ„!</h3>
        <p>${error.message}</p>
        <a href="index.html" class="btn-details" style="margin-top: 20px; display: inline-block;">
          Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
        </a>
      </div>
    `;
  }
});

function renderProduct(product) {
  const productDetail = document.getElementById('product-detail');
  
  const isFree = product.price === "0" || product.price === 0;
  const priceText = isFree ? 'Ø±Ø§ÛŒÚ¯Ø§Ù†' : `${parseInt(product.price).toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†`;
  const priceClass = isFree ? 'free' : '';
  
  const features = product.details.split('.').filter(f => f.trim()).slice(0, 4);
  
  const productHTML = `
    <!-- Ù‡Ø¯Ø± Ù…Ø­ØµÙˆÙ„ -->
    <div class="product-header">
      <h1 class="product-title">${product.name}</h1>
      <div class="product-price-tag ${priceClass}">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 1v22M17 5H9.5a3.5 3.5 0 100 7h5a3.5 3.5 0 110 7H6"/>
        </svg>
        ${priceText}
      </div>
    </div>
    
    <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
    <div class="product-content">
      <!-- Ø¨Ø®Ø´ ØªØµÙˆÛŒØ± -->
      <div class="product-image-section">
        <div class="main-image" style="position: relative;">
          ${product.id === 1 ? '<span class="image-badge">Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ÙˆÛŒÚ˜Ù‡</span>' : ''}
          <img src="${product.image}" alt="${product.name}" 
               onerror="this.src='https://via.placeholder.com/500x350/007aff/ffffff?text=DNI+CO'">
        </div>
        
        <div class="product-features">
          ${features.map(feature => `
            <div class="feature-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              ${feature.trim()}
            </div>
          `).join('')}
        </div>
      </div>
      
      <!-- Ø¨Ø®Ø´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ùˆ Ø³ÙØ§Ø±Ø´ -->
      <div class="product-info-section">
        <div class="product-description">
          <h3>ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ø§Ù…Ù„</h3>
          <p>${product.details}</p>
        </div>
        
        <div class="order-section">
          <h3>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6"></path>
            </svg>
            Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´
          </h3>
          
          <form id="order-form" class="order-form">
            <div class="form-group">
              <label for="name">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ *</label>
              <input type="text" id="name" name="name" class="form-control" required 
                     placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯ Ø­Ø³ÛŒÙ† Ù…Ù‡Ø¯ÙˆÛŒ">
            </div>
            
            <div class="form-group">
              <label for="phone">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ *</label>
              <input type="tel" id="phone" name="phone" class="form-control" required 
                     placeholder="Ù…Ø«Ø§Ù„: Û°Û¹Û³Û¶Û²Û³Û³ÛµÛ²Û¶Û¶">
            </div>
            
            <div class="form-group">
              <label for="details">Ø¬Ø²Ø¦ÛŒØ§Øª Ø³ÙØ§Ø±Ø´</label>
              <textarea id="details" name="details" class="form-control" rows="4"
                        placeholder="Ù…Ø´Ø®ØµØ§Øª Ø¯Ù‚ÛŒÙ‚ Ø³ÙØ§Ø±Ø´ Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..."></textarea>
            </div>
            
            <button type="submit" class="submit-btn">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"></path>
              </svg>
              Ø«Ø¨Øª Ù†Ù‡Ø§ÛŒÛŒ Ø³ÙØ§Ø±Ø´
            </button>
          </form>
          
          <div class="contact-options">
            <a href="tel:09362335266" class="contact-btn call">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"/>
              </svg>
              ØªÙ…Ø§Ø³ ØªÙ„ÙÙ†ÛŒ
            </a>
          </div>
        </div>
      </div>
    </div>
  `;
  
  productDetail.innerHTML = productHTML;
  
  // Ù…Ø¯ÛŒØ±ÛŒØª ÙØ±Ù…
  const orderForm = document.getElementById('order-form');
  if (orderForm) {
    orderForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Ù†Ù…Ø§ÛŒØ´ Ù„ÙˆØ¯ÛŒÙ†Ú¯
      const submitBtn = this.querySelector('.submit-btn');
      const originalHTML = submitBtn.innerHTML;
      submitBtn.innerHTML = `
        <div style="display: inline-block; width: 20px; height: 20px; border: 2px solid white; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
        Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„...
      `;
      submitBtn.disabled = true;
      
      setTimeout(() => {
        const formData = new FormData(orderForm);
        const name = formData.get('name');
        const phone = formData.get('phone');
        const details = formData.get('details') || 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­';
        
        // Ø§ÛŒØ¬Ø§Ø¯ Ù¾ÛŒØ§Ù… Ø³ÙØ§Ø±Ø´
        const message = `ğŸ“¦ Ø³ÙØ§Ø±Ø´ Ø¬Ø¯ÛŒØ¯\nÙ…Ø­ØµÙˆÙ„: ${product.name}\nÙ…Ø´ØªØ±ÛŒ: ${name}\nØªÙ…Ø§Ø³: ${phone}\nØ¬Ø²Ø¦ÛŒØ§Øª: ${details}`;
        
        // Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ø§ iframe (Ù…Ø·Ù…Ø¦Ù†â€ŒØªØ±ÛŒÙ† Ø±ÙˆØ´)
        const token = 'bot425913:7d5eec5b-c6c8-4bd9-9500-95e1d5a3bde4';
        const chat_id = 10977332;
        const url = `https://eitaayar.ir/api/${token}/sendMessage?chat_id=${chat_id}&text=${encodeURIComponent(message)}`;
        
        console.log('Ø§Ø±Ø³Ø§Ù„ Ø³ÙØ§Ø±Ø´ Ø¨Ù‡:', url);
        
        // Ø±ÙˆØ´ iframe
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.src = url;
        document.body.appendChild(iframe);
        
        // Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø±Ø³Ø§Ù„
        setTimeout(() => {
          document.body.removeChild(iframe);
          alert('âœ… Ø³ÙØ§Ø±Ø´ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯!\n\nØ¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø¨Ø§ Ø´Ù…Ø§ ØªÙ…Ø§Ø³ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒÙ….');
          orderForm.reset();
          
          // Ø¨Ø§Ø²Ú¯Ø´Øª Ø¯Ú©Ù…Ù‡
          submitBtn.innerHTML = originalHTML;
          submitBtn.disabled = false;
        }, 1500);
        
      }, 500);
    });
  }
}

// Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ø§Ø³Ù¾ÛŒÙ†Ø±
const style = document.createElement('style');
style.textContent = `
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
`;
document.head.appendChild(style);
</script>

</body>
</html>
